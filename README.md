# bookers2-3
## DMM WEBCAMP 2ヶ月目応用課題

### 課題3 Bookers2を完成させよう(穴埋め)

#### ① Bookers2にいいね機能を追加しましょう
##### 実装する機能
* コントローラ
* favoritesコントローラを追加
* createアクションを追加
* 用途：いいねを作成する
* destroyアクションを追加
* 用途：いいねを削除する
* いいねを作成, いいねを削除した後は、行う前にいた画面に遷移すること
* モデル
* favoriteモデルを追加
* 用途：ユーザーと投稿のセットでいいねをしている状態とする
* ユーザーは一つの投稿に一つしかいいねできないこと
* ビュー
* 投稿一覧画面にいいね数, いいね(する, 外す)ボタンを追加
* 投稿詳細画面にいいね数, いいね(する, 外す)ボタンを追加
* いいねされていない記事に対しては、いいね作成ボタンを表示させる
* いいねされている記事に対しては、いいね削除ボタンを表示させる

#### ② Bookers2にコメント機能を追加しましょう
##### 実装する機能
* コントローラ
* book_commentsコントローラを追加
* createアクションを追加
* 用途：コメントを作成する
* destroyアクションを追加
* 用途：コメントを削除する
* 自分のコメントしか削除できないこと
* コメント, コメント削除後は行う前の画面に遷移すること
* モデル
* book_commentモデルを追加 空のコメントは保存できないこと
* ビュー
* 投稿一覧画面にコメント数を追加
* 投稿詳細画面に、投稿に対するコメント一覧, コメント数を追加
* ユーザー詳細画面に、コメント数を追加

## 使用言語
Ruby on Rails

## 使用方法
### テスト手順の自動化
gemを入れて、specファイルを移動して、テストを実行するコマンドを打つという手順をまとめたcheck.shというファイルを作成した
アプリケーションのルートディレクトリにおいて
bash check.sh
というコマンドを打つと最後まで自動で終了する
ディレクトリが野原のディレクトリにあっているため、自分で修正が必要

### 実行コマンド
bundle exec rspec spec/ --format documentation

### 注意
カラム名が違うとほとんどのテストに失敗してしまうが、このコマンドですべてのファイルの文字列を変更することができる
例はopinionというカラム名で作られていたため、それをすべてbodyというカラム名に変更した
find . -type f | xargs sed -i 's/opinion/body/g'

一回テストを試していると、テスト用のデータベースtest.sqlite3ができているため、カラム名を変更したのちに再びやる時は
rm db/test.sqlite3によって、ファイルを削除してから実行する


## 参照
[DMM WEBCAMP カリキュラム](https://web-camp.online/lesson/curriculums)

